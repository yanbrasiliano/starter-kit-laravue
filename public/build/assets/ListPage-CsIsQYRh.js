import{f as d,o as r,i as w,w as o,b as l,v as O,s as q,j as E,x as G,y as R,q as _,C as T,z as j,c as $,F as L,A as F,B as Y,e as H,D as Q,E as M,G as X,a as c,H as x,u as D,I as V,J as Z,h as ee,K as ae,m as le,N as I}from"./app-BgjHESA5.js";import{u as te}from"./useUserStore-DiIchrsT.js";const ne="/build/assets/plus-Be-q-5Sm.svg",se="/build/assets/edit-BcPl-2Lm.svg",oe="/build/assets/remove-ByCYmp3i.svg",ie="/build/assets/consult-G7ojonsV.svg",ue=c("span",{class:"q-ml-sm"},"Tem certeza que deseja excluir por definitivo este usuário?",-1),re={key:0},de={key:1},ce={style:{marginRight:"10px"}},me={style:{marginRight:"10px"}},ge={style:{marginRight:"10px"}},fe={key:2},pe={__name:"TableSync",emits:["updatePagination","onStatus","onConsult","onEdit","onDelete"],setup(A,{emit:p}){const v=p,C=d(),B=d({}),U=d(),S=d(),n=d({}),y=d(!1),N=P=>{y.value=!0,n.value=P},b=P=>{y.value=!1,P&&v("onDelete",n.value),n.value=null};return(P,u)=>(r(),w(Z,{class:"table-default-data-table",rows:S.value,columns:U.value,"row-key":"name","no-data-label":"Nenhum registro encontrado","rows-per-page-options":[10,25,50,100],loading:C.value,"loading-label":"Carregando...",pagination:B.value,"computed-rows-number":20,"onUpdate:pagination":u[3]||(u[3]=a=>v("updatePagination",a)),onRequest:u[4]||(u[4]=a=>v("updatePagination",a))},{header:o(a=>[l(O,{modelValue:y.value,"onUpdate:modelValue":u[2]||(u[2]=i=>y.value=i),persistent:""},{default:o(()=>[l(q,null,{default:o(()=>[l(E,{class:"row items-center"},{default:o(()=>[ue]),_:1}),l(G,{align:"center"},{default:o(()=>[R(l(_,{outline:"",label:"Sim",color:"secondary",onClick:u[0]||(u[0]=i=>b(!0))},null,512),[[T]]),R(l(_,{label:"Não",color:"secondary",onClick:u[1]||(u[1]=i=>b(!1))},null,512),[[T]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(j,{props:a},{default:o(()=>[(r(!0),$(L,null,F(a.cols,i=>(r(),w(Y,{key:i.name,props:a},{default:o(()=>[H(Q(i.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:o(a=>[l(j,{props:a},{default:o(()=>[(r(!0),$(L,null,F(a.cols,i=>(r(),w(M,{key:i.name,props:a},{default:o(()=>[i.name=="setSituation"?(r(),$("span",re,[l(X,{modelValue:a.row.active,"onUpdate:modelValue":[m=>a.row.active=m,m=>v("onStatus",{value:m,data:a.row})],color:"primary","keep-color":""},null,8,["modelValue","onUpdate:modelValue"])])):i.name=="action"?(r(),$("span",de,[c("span",ce,[i.methods.onConsult?(r(),w(x,{key:0,name:`img:${D(ie)}`,size:"2em",class:"cursor-pointer",title:"Consultar",onClick:m=>v("onConsult",a.row)},null,8,["name","onClick"])):V("",!0)]),c("span",me,[i.methods.onEdit?(r(),w(x,{key:0,name:`img:${D(se)}`,size:"2em",class:"cursor-pointer",title:"Editar",onClick:m=>v("onEdit",a.row)},null,8,["name","onClick"])):V("",!0)]),c("span",ge,[i.methods.onDelete?(r(),w(x,{key:0,name:`img:${D(oe)}`,size:"2em",class:"cursor-pointer",title:"Remover",onClick:m=>N(a.row)},null,8,["name","onClick"])):V("",!0)])])):(r(),$("span",fe,Q(i.value),1))]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),pagination:o(a=>[c("span",null,"Página "+Q(a.pagination.page)+" de "+Q(a.pagesNumber),1),a.pagesNumber>2?(r(),w(_,{key:0,icon:"first_page",color:"grey-8",round:"",dense:"",flat:"",disable:a.isFirstPage,onClick:a.firstPage},null,8,["disable","onClick"])):V("",!0),l(_,{icon:"chevron_left",color:"grey-8",round:"",dense:"",flat:"",disable:a.isFirstPage,onClick:a.prevPage},null,8,["disable","onClick"]),l(_,{icon:"chevron_right",color:"grey-8",round:"",dense:"",flat:"",disable:a.isLastPage,onClick:a.nextPage},null,8,["disable","onClick"]),a.pagesNumber>2?(r(),w(_,{key:1,icon:"last_page",color:"grey-8",round:"",dense:"",flat:"",disable:a.isLastPage,onClick:a.lastPage},null,8,["disable","onClick"])):V("",!0)]),_:1},8,["rows","columns","loading","pagination"]))}},ve=c("div",{class:"row"},[c("div",{class:"col-md-4",style:{marginBottom:"20px"}},[c("span",{style:{fontSize:"20px",fontWeight:"bold",color:"#3B3B3B"}}," Gerencie a sua lista de usuários ")])],-1),_e={class:"row justify-between"},ye={class:"col-md-4"},be={class:"col-md-4 offset-md-4"},we={class:"column items-end"},ke=c("span",{class:"q-ml-sm"},"Deseja enviar e-mail para esse usuário notificando a ativação?",-1),he={__name:"ListPage",setup(A){const p=te(),v=ee(),C=ae(),B=d(""),U=d(""),S=d(!1),n=d({}),y=d(!1),N=d([]),b=d(null),P=d([{name:"id",align:"left",label:"ID",field:"id",sortable:!0},{name:"name",required:!0,label:"Nome",align:"left",field:e=>e.name,format:e=>`${e}`,sortable:!0},{name:"email",label:"E-mail",field:"email",align:"left",sortable:!0},{name:"role",label:"Perfil",align:"left",field:"role",sortable:!0},{name:"setSituation",required:!0,label:"Situação",align:"left",field:e=>e.active,format:e=>`${e}`},{name:"action",label:"Opções",align:"center",field:e=>e.id,format:e=>`${e}`,methods:{onConsult:!1,onEdit:!0,onDelete:!0}}]),u=async(e={})=>{try{C.loading.show(),S.value=!0,e.search=U.value,await p.list(e),N.value=p.getUsers.data,n.value.rowsPerPage=p.getUsers.per_page,n.value.page=p.getUsers.current_page,n.value.rowsNumber=p.getUsers.total}finally{S.value=!1,C.loading.hide()}},a=async e=>{var t,s,g,f,k,h,z;n.value.descending=(t=e.pagination)==null?void 0:t.descending,n.value.sortBy=(s=e.pagination)==null?void 0:s.sortBy,await u({limit:(g=e.pagination)==null?void 0:g.rowsPerPage,page:(f=e.pagination)==null?void 0:f.page,order:(k=e.pagination)!=null&&k.descending||((h=e==null?void 0:e.pagination)==null?void 0:h.descending)==null?"desc":"asc",column:(z=e.pagination)==null?void 0:z.sortBy,search:""})},i=async e=>{const{id:t,name:s,email:g,cpf:f,active:k,role_id:h}=e.data;b.value={id:t,name:s,email:g,cpf:f,active:k?1:0,role_id:h},y.value=!!e.value,e.value||m(!1)},m=async e=>{var t,s,g,f,k;try{const{id:h}=b.value;delete b.value.id,await p.update(h,{...b.value,notify_status:e}),I.create({position:"top-right",color:"positive",message:"Status atualizado com sucesso!"}),b.value=null}finally{await u({limit:(t=n.value)==null?void 0:t.rowsPerPage,page:(s=n.value)==null?void 0:s.page,order:(g=n.value)!=null&&g.descending||((f=n.value)==null?void 0:f.descending)==null?"desc":"asc",column:(k=n.value)==null?void 0:k.sortBy,search:""})}},J=async()=>{var e,t,s;U.value=B.value,await u({limit:(e=n.value)==null?void 0:e.rowsPerPage,order:(t=n.value)!=null&&t.descending?"desc":"asc",column:(s=n.value)==null?void 0:s.sortBy})},K=e=>{v.push({name:"editUsers",params:{id:e.id}})},W=async e=>{var t,s,g,f;try{C.loading.show(),await p.destroy(e.id),I.create({position:"top-right",color:"positive",message:"Usuário removido com sucesso!"})}finally{C.loading.hide(),await u({limit:(t=n.value)==null?void 0:t.rowsPerPage,page:(s=n.value)==null?void 0:s.page,order:(g=n.value)!=null&&g.descending?"desc":"asc",column:(f=n.value)==null?void 0:f.sortBy,search:""})}};return(e,t)=>(r(),$("div",null,[ve,l(q,null,{default:o(()=>[l(E,null,{default:o(()=>[c("div",_e,[c("div",ye,[l(le,{modelValue:B.value,"onUpdate:modelValue":t[0]||(t[0]=s=>B.value=s),filled:"",label:"Pesquisar por..."},{append:o(()=>[l(x,{name:"search",class:"cursor-pointer",onClick:J})]),_:1},8,["modelValue"])]),c("div",be,[c("div",we,[l(_,{color:"secondary",onClick:t[1]||(t[1]=s=>D(v).push({name:"createUsers"}))},{default:o(()=>[l(x,{size:"15px",name:`img:${D(ne)}`},null,8,["name"]),H(" Criar ")]),_:1})])])])]),_:1}),l(E,null,{default:o(()=>[l(pe,{loading:S.value,columns:P.value,rows:N.value,pagination:n.value,onUpdatePagination:a,onOnStatus:i,onOnEdit:K,onOnDelete:W},null,8,["loading","columns","rows","pagination"])]),_:1}),l(q)]),_:1}),l(O,{modelValue:y.value,"onUpdate:modelValue":t[4]||(t[4]=s=>y.value=s),persistent:""},{default:o(()=>[l(q,null,{default:o(()=>[l(E,{class:"row items-center"},{default:o(()=>[ke]),_:1}),l(G,{align:"center"},{default:o(()=>[R(l(_,{outline:"",label:"Sim",color:"secondary",onClick:t[2]||(t[2]=s=>m(!0))},null,512),[[T]]),R(l(_,{label:"Não",color:"secondary",onClick:t[3]||(t[3]=s=>m(!1))},null,512),[[T]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};export{he as default};
